@model Projet2.ViewModels.HomeViewModel
@using Microsoft.Extensions.Options
@inject IOptions<Projet2.Data.StripeSettings> Stripe
@{
    ViewData["Title"] = "Paiement Ligne de Panier";
}


<div class=" container">

    @{var SousTotal = Decimal.Round(@Model.LignePanierSaisonnier.SousTotal, 2);
    }

    <form method="post" asp-controller="Boutique" asp-action="ModifierPanier">

        <div class="row">

            <div class="col-2"> @Model.PanierSaisonnier.NomPanier</div>
            <div class="col-2">
                <input type="number" class="form-control" name="quantite" value="@Model.LignePanierSaisonnier.Quantite" />
                <input type="hidden" name="Id" value="@Model.LignePanierSaisonnier.Id" />
            </div>
            <div class="col-2">@SousTotal</div>

            <div class="col-2"><button class="btn btn-primary" type="submit">Modifier</button></div>

        </div>

    </form>
    <div>
        @{ decimal Apayer = (decimal)Model.LignePanierSaisonnier.SousTotal;
            decimal APayer = Apayer * 100;
            var PrixAPayer = Decimal.Round(Apayer, 2);
        }

        <form asp-action="Paiement" asp-controller="Panier" method="post">
            <article>
                <label>Prix à payer: @PrixAPayer €</label>
                <input type="hidden" name="PanierId" value="@Model.LignePanierSaisonnier.Id" />
                <script src="//checkout.stripe.com/v2/checkout.js" class="stripe-button" data-key="@Stripe.Value.PublishableKey" data-locale="auto" data-description="Paiment" data-amount="@APayer"></script>
            </article>
        </form>

    </div>


</div>